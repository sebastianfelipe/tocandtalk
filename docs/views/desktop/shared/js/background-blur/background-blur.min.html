<!DOCTYPE html>

<html>
<head>
  <title>background-blur.min.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>background-blur.min.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>!<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-string">"use strict"</span>;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">e</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> i=t(<span class="hljs-keyword">this</span>),n=i.data(<span class="hljs-string">"plugin.backgroundBlur"</span>),o=t.extend({},r.DEFAULTS,i.data(),<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> e&amp;&amp;e);n||i.data(<span class="hljs-string">"plugin.backgroundBlur"</span>,n=<span class="hljs-keyword">new</span> r(<span class="hljs-keyword">this</span>,o)),<span class="hljs-string">"fadeIn"</span>===e?n.fadeIn():<span class="hljs-string">"fadeOut"</span>===e?n.fadeOut():<span class="hljs-string">"string"</span>==<span class="hljs-keyword">typeof</span> e&amp;&amp;n.generateBlurredImage(e)})}<span class="hljs-keyword">var</span> i=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t,e=<span class="hljs-number">3</span>,i=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"div"</span>),n=i.getElementsByTagName(<span class="hljs-string">"i"</span>);i.innerHTML=<span class="hljs-string">"&lt;!--[if gt IE "</span>+ ++e+<span class="hljs-string">"]&gt;&lt;i&gt;&lt;/i&gt;&lt;![endif]--&gt;"</span>,n[<span class="hljs-number">0</span>];);<span class="hljs-keyword">return</span> e&gt;<span class="hljs-number">4</span>?e:t}(),n=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span><span class="hljs-string">"_"</span>+<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>,<span class="hljs-number">9</span>)},o={svgns:<span class="hljs-string">"http://www.w3.org/2000/svg"</span>,xlink:<span class="hljs-string">"http://www.w3.org/1999/xlink"</span>,createElement:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> i=<span class="hljs-built_in">document</span>.createElementNS(o.svgns,t);<span class="hljs-keyword">return</span> e&amp;&amp;o.setAttr(i,e),i},setAttr:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> e)<span class="hljs-string">"href"</span>===i?t.setAttributeNS(o.xlink,i,e[i]):t.setAttribute(i,e[i]);<span class="hljs-keyword">return</span> t}},r=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,i</span>)</span>{<span class="hljs-keyword">this</span>.internalID=n(),<span class="hljs-keyword">this</span>.$element=t(e),<span class="hljs-keyword">this</span>.$width=<span class="hljs-keyword">this</span>.$element.width(),<span class="hljs-keyword">this</span>.$height=<span class="hljs-keyword">this</span>.$element.height(),<span class="hljs-keyword">this</span>.element=e,<span class="hljs-keyword">this</span>.options=t.extend({},r.DEFAULTS,i),<span class="hljs-keyword">this</span>.$overlayEl=<span class="hljs-keyword">this</span>.createOverlay(),<span class="hljs-keyword">this</span>.$blurredImage={},<span class="hljs-keyword">this</span>.useVelocity=<span class="hljs-keyword">this</span>.detectVelocity(),<span class="hljs-keyword">this</span>.attachListeners(),<span class="hljs-keyword">this</span>.generateBlurredImage(<span class="hljs-keyword">this</span>.options.imageURL)};r.VERSION=<span class="hljs-string">"0.0.1"</span>,r.DEFAULTS={imageURL:<span class="hljs-string">""</span>,blurAmount:<span class="hljs-number">10</span>,imageClass:<span class="hljs-string">""</span>,overlayClass:<span class="hljs-string">""</span>,duration:!<span class="hljs-number">1</span>,opacity:<span class="hljs-number">1</span>},r.prototype.detectVelocity=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>!!<span class="hljs-built_in">window</span>.jQuery.Velocity},r.prototype.attachListeners=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.$element.on(<span class="hljs-string">"ui.blur.loaded"</span>,t.proxy(<span class="hljs-keyword">this</span>.fadeIn,<span class="hljs-keyword">this</span>)),<span class="hljs-keyword">this</span>.$element.on(<span class="hljs-string">"ui.blur.unload"</span>,t.proxy(<span class="hljs-keyword">this</span>.fadeOut,<span class="hljs-keyword">this</span>))},r.prototype.fadeIn=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.options.duration&amp;&amp;<span class="hljs-keyword">this</span>.options.duration&gt;<span class="hljs-number">0</span>&amp;&amp;(<span class="hljs-keyword">this</span>.useVelocity?<span class="hljs-keyword">this</span>.$blurredImage.velocity({opacity:<span class="hljs-keyword">this</span>.options.opacity},{duration:<span class="hljs-keyword">this</span>.options.duration}):<span class="hljs-keyword">this</span>.$blurredImage.animate({opacity:<span class="hljs-keyword">this</span>.options.opacity},{duration:<span class="hljs-keyword">this</span>.options.duration}))},r.prototype.fadeOut=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.options.duration&amp;&amp;<span class="hljs-keyword">this</span>.options.duration&gt;<span class="hljs-number">0</span>?<span class="hljs-keyword">this</span>.useVelocity?<span class="hljs-keyword">this</span>.$blurredImage.velocity({opacity:<span class="hljs-number">0</span>},{duration:<span class="hljs-keyword">this</span>.options.duration}):<span class="hljs-keyword">this</span>.$blurredImage.animate({opacity:<span class="hljs-number">0</span>},{duration:<span class="hljs-keyword">this</span>.options.duration}):<span class="hljs-keyword">this</span>.$blurredImage.css({opacity:<span class="hljs-number">0</span>})},r.prototype.generateBlurredImage=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>.$blurredImage;<span class="hljs-keyword">this</span>.internalID=n(),e.length&gt;<span class="hljs-number">0</span>&amp;&amp;(<span class="hljs-keyword">this</span>.options.duration&amp;&amp;<span class="hljs-keyword">this</span>.options.duration&gt;<span class="hljs-number">0</span>?<span class="hljs-keyword">this</span>.useVelocity?e.first().velocity({opacity:<span class="hljs-number">0</span>},{duration:<span class="hljs-keyword">this</span>.options.duration,complete:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.remove()}}):e.first().animate({opacity:<span class="hljs-number">0</span>},{duration:<span class="hljs-keyword">this</span>.options.duration,complete:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{e.remove()}}):e.remove()),<span class="hljs-keyword">this</span>.$blurredImage=i?<span class="hljs-keyword">this</span>.createIMG(t,<span class="hljs-keyword">this</span>.$width,<span class="hljs-keyword">this</span>.$height):<span class="hljs-keyword">this</span>.createSVG(t,<span class="hljs-keyword">this</span>.$width,<span class="hljs-keyword">this</span>.$height)},r.prototype.createOverlay=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.overlayClass&amp;&amp;<span class="hljs-string">""</span>!==<span class="hljs-keyword">this</span>.options.overlayClass?t(<span class="hljs-string">"&lt;div&gt;&lt;/div&gt;"</span>).prependTo(<span class="hljs-keyword">this</span>.$element).addClass(<span class="hljs-keyword">this</span>.options.overlayClass):!<span class="hljs-number">1</span>},r.prototype.createSVG=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,i,n</span>)</span>{<span class="hljs-keyword">var</span> r=<span class="hljs-keyword">this</span>,s=o.createElement(<span class="hljs-string">"svg"</span>,{xmlns:o.svgns,version:<span class="hljs-string">"1.1"</span>,width:i,height:n,id:<span class="hljs-string">"blurred"</span>+<span class="hljs-keyword">this</span>.internalID,<span class="hljs-string">"class"</span>:<span class="hljs-keyword">this</span>.options.imageClass,viewBox:<span class="hljs-string">"0 0 "</span>+i+<span class="hljs-string">" "</span>+n,preserveAspectRatio:<span class="hljs-string">"none"</span>}),a=<span class="hljs-string">"blur"</span>+<span class="hljs-keyword">this</span>.internalID,u=o.createElement(<span class="hljs-string">"filter"</span>,{id:a}),l=o.createElement(<span class="hljs-string">"feGaussianBlur"</span>,{<span class="hljs-string">"in"</span>:<span class="hljs-string">"SourceGraphic"</span>,stdDeviation:<span class="hljs-keyword">this</span>.options.blurAmount}),h=o.createElement(<span class="hljs-string">"image"</span>,{x:<span class="hljs-number">0</span>,y:<span class="hljs-number">0</span>,width:i,height:n,externalResourcesRequired:<span class="hljs-string">"true"</span>,href:e,style:<span class="hljs-string">"filter:url(#"</span>+a+<span class="hljs-string">")"</span>,preserveAspectRatio:<span class="hljs-string">"none"</span>});h.addEventListener(<span class="hljs-string">"load"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{r.$element.trigger(<span class="hljs-string">"ui.blur.loaded"</span>)},!<span class="hljs-number">0</span>),h.addEventListener(<span class="hljs-string">"SVGLoad"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{r.$element.trigger(<span class="hljs-string">"ui.blur.loaded"</span>)},!<span class="hljs-number">0</span>),u.appendChild(l),s.appendChild(u),s.appendChild(h);<span class="hljs-keyword">var</span> d=t(s);<span class="hljs-keyword">return</span> r.options.duration&amp;&amp;r.options.duration&gt;<span class="hljs-number">0</span>&amp;&amp;(d.css({opacity:<span class="hljs-number">0</span>}),<span class="hljs-built_in">window</span>.setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-string">"0"</span>===d.css(<span class="hljs-string">"opacity"</span>)&amp;&amp;d.css({opacity:<span class="hljs-number">1</span>})},<span class="hljs-keyword">this</span>.options.duration+<span class="hljs-number">100</span>)),<span class="hljs-keyword">this</span>.element.insertBefore(s,<span class="hljs-keyword">this</span>.element.firstChild),d},r.prototype.createIMG=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e,i</span>)</span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>,o=<span class="hljs-keyword">this</span>.prependImage(t),r=<span class="hljs-number">2</span>*<span class="hljs-keyword">this</span>.options.blurAmount&gt;<span class="hljs-number">100</span>?<span class="hljs-number">100</span>:<span class="hljs-number">2</span>*<span class="hljs-keyword">this</span>.options.blurAmount;<span class="hljs-keyword">return</span> o.css({filter:<span class="hljs-string">"progid:DXImageTransform.Microsoft.Blur(pixelradius="</span>+r+<span class="hljs-string">") "</span>,top:<span class="hljs-number">2.5</span>*-<span class="hljs-keyword">this</span>.options.blurAmount,left:<span class="hljs-number">2.5</span>*-<span class="hljs-keyword">this</span>.options.blurAmount,width:e+<span class="hljs-number">2.5</span>*<span class="hljs-keyword">this</span>.options.blurAmount,height:i+<span class="hljs-number">2.5</span>*<span class="hljs-keyword">this</span>.options.blurAmount}).attr(<span class="hljs-string">"id"</span>,<span class="hljs-string">"blurred"</span>+<span class="hljs-keyword">this</span>.internalID),o.load(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{n.$element.trigger(<span class="hljs-string">"ui.blur.loaded"</span>)}),<span class="hljs-keyword">this</span>.options.duration&amp;&amp;<span class="hljs-keyword">this</span>.options.duration&gt;<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">window</span>.setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-string">"0"</span>===o.css(<span class="hljs-string">"opacity"</span>)&amp;&amp;o.css({opacity:<span class="hljs-number">1</span>})},<span class="hljs-keyword">this</span>.options.duration+<span class="hljs-number">100</span>),o},r.prototype.prependImage=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> i,n=t(<span class="hljs-string">'&lt;img src="'</span>+e+<span class="hljs-string">'" /&gt;'</span>);<span class="hljs-keyword">return</span> i=<span class="hljs-keyword">this</span>.$overlayEl?n.insertBefore(<span class="hljs-keyword">this</span>.$overlayEl).attr(<span class="hljs-string">"id"</span>,<span class="hljs-keyword">this</span>.internalID).addClass(<span class="hljs-keyword">this</span>.options.imageClass):n.prependTo(<span class="hljs-keyword">this</span>.$element).attr(<span class="hljs-string">"id"</span>,<span class="hljs-keyword">this</span>.internalID).addClass(<span class="hljs-keyword">this</span>.options.imageClass)};<span class="hljs-keyword">var</span> s=t.fn.backgroundBlur;t.fn.backgroundBlur=e,t.fn.backgroundBlur.Constructor=r,t.fn.backgroundBlur.noConflict=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t.fn.backgroundBlur=s,<span class="hljs-keyword">this</span>}}(jQuery);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
